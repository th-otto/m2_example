DEFINITION MODULE SysVars;

(* Autor: Dirk Steins.                             Stand: 5.12.90  *)

(* Liste der Systemvariablen                                       *)
(* Bezeichnungen nach                                              *)
(*      Atari ST Profi Buch                                        *)
(*      Jankowski, Rabich, Reschke                                 *)
(*      Sybex-Verlag                                               *)

(* Mehr Informationen zu den Variablen gibt es ebenfalls im oben   *)
(* genanntem Werk.                                                 *)

(* Der Zugriff auf diese Variablen ist Supervisor-Modus, z.B.      *)
(* mittels der Super..-Funktionen aus dem Modul SysUtil1 mîglich.  *)



CONST

    etv_timer   =   0400H     ; (* Interrupt-Vektor des System-Timers *)
    etv_critic  =   0404H     ; (* Vektor fÅr den Critical-Error-Handler *)
    etv_term    =   0408H     ; (* Interrupt-Vektor fÅr Prozeûbeendigungen *)
    etv_xtra    =   040CH     ; (* 5 reservierte Vektoren *)
    memvalid    =   0420H     ; (* = $752019f3 heiût, Speicherkonfiguration *)
                               (* ist gÅltig (nach RESET)                  *)
                               (* siehe auch memval2, memval3 und memcntrl *)
    memcntrl    =   0424H     ; (* Unteres Nibble des Schattenregisters des *)
                               (* Speicherkontroll-Registers ($ff8001)     *)
    resvalid    =   0426H     ; (* = $31415926 => bei RESET Åber resvector  *)
                               (*                springen                  *)
    resvector   =   042AH     ; (* siehe resvalid                           *)
    phystop     =   042EH     ; (* Zeigt auf 1. Byte Åber phys. Ende des RAM *)
    _membot     =   0432H     ; (* Anfang des unter GEMDOS freien Speichers  *)
    _memtop     =   0436H     ; (* Ende   des unter GEMDOS freien Speichers  *)
    memval2     =   043AH     ; (* = $237698aa , gilt in Verbindung mit memval *)
    flock       =   043EH     ; (* fÅr Sperren des DMA-Zugriffs             *)
    seekrate    =   0440H     ; (* Default-Werte fÅr die Floppy-Steprate    *)
    _timer_ms   =   0442H     ; (* Zeit in ms, die zwischen zwei System-Timer *)
                               (* Interrupts liegt, normalerweise 20 ms    *)
    _fverify    =   0444H     ; (* <> 0 : Verify nach Floppy-Schreiben *)
    _bootdev    =   0446H     ; (* legt das Boot-Laufwerk nach dem nÑchstem *)
                               (* RESET fest                               *)
    palmode     =   0448H     ; (* fÅr Fernsehnorm: 0=60Hz, 1=50Hz (PAL)    *)
    defshiftmd  =   044AH     ; (* Default Farb-Auflîsung: 0=320*200,1=640*200*)
    sshiftmd    =   044CH     ; (* Shadow des Shifter-Modus-Registers       *)
    _v_bas_ad   =   044EH     ; (* Zeiger auf den Anfang des Bildspeichers  *)
    vblsem      =   0452H     ; (* 1= VBL-Handler aktiviert                 *)
    nvbls       =   0454H     ; (* Anzahl der EintrÑge in _vblqueue         *)
    _vblqueue   =   0456H     ; (* Zeiger auf Tabelle mit Adressen der VBL- *)
                               (* Routinen. 1. Vektor immer Mausbewegung!! *)
    colorptr    =   045AH     ; (* Zeiger auf Farbpalette nach nÑchstem VBL *)
                               (* (kann auch 0 sein, dann passiert nichts) *)
    screenpt    =   045EH     ; (* Zeiger auf Start des Bildschirms nach    *)
                               (* nÑchstem VBlank. (kann auch 0 sein)      *)
    _vbclock    =   0462H     ; (* Anzahl der bereits erfolgten VBlanks     *)
    _frclock    =   0466H     ; (* wie _vbclock, wird nur nicht durch vblsem *)
                               (* gestoppt                                 *)
    hdv_init    =   046AH     ; (* Vektor fÅr Init der logischen Drives     *)
    swv_vec     =   046EH     ; (* Vektor auf Routine bei Wechsel           *)
                               (* Mono <-> Color, normalerweise auf RESET  *)
    hdv_bpb     =   0472H     ; (* Vektor fÅr GetBPB auf logischen Drives   *)
    hdv_rw      =   0476H     ; (* Vektor fÅr Lesen/Schreiben auf log. Drives *)
    hdv_boot    =   047AH     ; (* Vek. fÅr Lesen des Bootsectors auf log. "  *)
    hdv_mediach =   047EH     ; (* Vek. fÅr Wechselstatus auf log. Drive    *)
    _cmdload    =   0482H     ; (* <>0 : Lade COMMAND.COM statt GEM nach Boot *)
    conterm     =   0484H     ; (* Attributbits fÅr CON:                    *)
    trp14ret    =   0486H     ; (* Interne RÅcksprungadresse bei TRAP #14   *)
    criticret   =   048AH     ; (* Interne RÅcksprungadresse                *)
    themd       =   048EH     ; (* MD-Struktur des GEMDOS. Nicht Ñndern!!!  *)
    _____md     =   049EH     ; (* Platz fÅr weiteren MD                    *)
    savptr      =   04A2H     ; (* Zeiger auf BIOS Register-Zwischenspeicher *)
    _nflops     =   04A6H     ; (* Anzahl der angemeldeten Disk-Drives      *)
    con_state   =   04A8H     ; (* Interner zeiger fÅr Bildschirmausgaben   *)
    sav_row     =   04ACH     ; (* Speicher fÅr Cursor-Position         *)
    sav_context =   04AEH     ; (* Zeiger  auf Speicherbereich fÅr Register *)
                               (* und Stackteile bei Exceptions (norm. $380) *)
    _bufl       =   04B2H     ; (* Zwei Zeiger auf Buffer-Control-Blocks(BCB) *)
    _hz_200     =   04BAH     ; (* Bisherige Anzahl der 200Hz-Interrupts    *)
    the_env     =   04BEH     ; (* Standard Environment Zeiger (unbenutzt)  *)
    _drvbits    =   04C2H     ; (* Bit-Vektor der angemeldeten Drives *)
    _dskbufp    =   04C6H     ; (* Zeiger auf 1k Buffer fÅr Disk-I/O  *)
    _autopath   =   04CAH     ; (* Zeiger auf Zugriffspfad fÅr AUTO-Ordner   *)
    _vbl_list   =   04CEH     ; (* UrsprÅngliche Liste der VBL-Routinen      *)
    _dumpflg    =   04EEH     ; (* ZÑhler fÅr ALT-HELP-TastendrÅcke   *)
    _prtabt     =   04F0H     ; (* Flag fÅr Abbruch des Druckvorgangs *)
    _sysbase    =   04F2H     ; (* Zeiger auf Anfangsadresse des TOS-Headers *)
    _shell_p    =   04F6H     ; (* Zeiger auf Kommandoeingabe-Routine einer  *)
                               (* Command-Shell. Im ROM nicht benutzt       *)
    end_os      =   04FAH     ; (* Zeiger auf 1. nicht vom TOS benutztes Byte*)
    exec_os     =   04FEH     ; (* Zeiger auf Shell-Programm nach Init von   *)
                               (* GEMDOS. Normalerweise AES und Desktop     *)
    scr_dump    =   0502H     ; (* Zeiger auf Hardcopy-Routine               *)
    
    (* Die folgenden Variablen sind erst ab TOS 1.2 (Blitter-TOS) vorhanden *)
    
    prv_lsto    =   0506H     ; (* Zeiger auf Routine fÅr Status der Drucker-*)
                               (* Schnittstelle. Ebenfalls fÅr Hardcopy     *)
    prv_lst     =   050AH     ; (* Zeiger auf Routine fÅr Ausgabe auf Drucker-*)
                               (* Schnittstelle. Ebenfalls fÅr Hardcopy     *)
    prv_auxo    =   050EH     ; (* Zeiger auf Routine fÅr Status der RS232-  *)
                               (* Schnittstelle. Ebenfalls fÅr Hardcopy     *)
    prv_aux     =   0512H     ; (* Zeiger auf Routine fÅr Ausgabe auf RS232- *)
                               (* Schnittstelle. Ebenfalls fÅr Hardcopy     *)
    pun_ptr     =   0516H     ; (* Zeiger auf HDINFO-Struktur                *)
    memval3     =   051AH     ; (* Siehe memval und memval2. Magic=$5555aaaa *)
    _longframe  =   059EH     ; (* Stackoffset bei Exceptions                *)
    
    (* Die folgenden Variablen sind erst ab TOS 1.6 (STE, TT) vorhanden *)

    _p_cookies  =   05A0H     ; (* Zeiger auf CookieJar - ggf. Null          *)
    bell_hook   =   05ACH     ; (* Adresse fÅr 'Glocken'-Ton. Zeigt auf nor- *)
                               (* male Prozedur, die mit RTS enden muû.     *)
                               (* Kann Original-Routine aufrufen            *)
    kcl_hook    =   05B0H     ; (* Adresse fÅr 'Key-Click'-Ton.              *)

    fmemtop     =   05A4H     ; (* Memtop fÅr Fast-RAM (TT-only!)            *)
    fmemvalid   =   05A8H     ; (* Memvalid fÅr Fast-RAM. Magic nicht bekannt*)

END SysVars.
